(function(){"use strict";var e={3969:function(e,t,a){a(66992),a(88674),a(19601),a(17727);var n=a(20144),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",{staticStyle:{"background-color":"#212121","overflow-y":"hidden","font-family":"'Fira Sans', sans-serif"}},[a("Navbar"),a("Tour"),a("v-main",[a("router-view")],1)],1)},o=[],i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("nav",[a("v-toolbar",{staticClass:"black darken-3",attrs:{flat:"",dark:""}},[a("v-toolbar-title",{staticClass:"text-uppercase container",staticStyle:{width:"unset !important"}},[a("span",{staticClass:"font-weight-black",staticStyle:{color:"#f5c10d"}},[e._v("Drought")]),a("span",[e._v("Dash")]),a("span",{staticStyle:{"font-size":"10px"}},[e._v(" BETA")])]),a("v-spacer"),a("v-tooltip",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({attrs:{icon:""},on:{click:e.startTour}},"v-btn",r,!1),n),[a("v-icon",[e._v("mdi-human-male-board")])],1)]}}])},[a("span",[e._v("Dashboard How-To Guide")])]),a("v-dialog",{attrs:{width:"500"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({attrs:{icon:""}},"v-btn",r,!1),n),[a("v-icon",[e._v("mdi-information-outline")])],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"text-h5 py-9"},[e._v(" About Drought Dash ")]),a("v-divider"),a("v-card-text",{staticClass:"py-4"},[e._v(" Drought Dash ")]),a("v-divider")],1)],1)],1)],1)},s=[],l=a(4367),c=a(20629),u={computed:(0,l.Z)({},(0,c.rn)({isDual:function(e){return e.mapContainer.isDual}})),data:function(){return{dialog:!1}},methods:{startTour:function(){this.isDual&&this.$store.dispatch("toggleDual"),this.$tours["explanatoryTour"].start()}}},d=u,p=a(1001),m=a(43453),f=a.n(m),g=a(63150),h=a(53237),y=a(37118),v=a(67336),b=a(11418),_=a(96428),S=a(99762),C=a(85218),x=a(27921),w=a(19330),T=(0,p.Z)(d,i,s,!1,null,"d8331dc0",null),k=T.exports;f()(T,{VBtn:g.Z,VCard:h.Z,VCardText:y.ZB,VCardTitle:y.EB,VDialog:v.Z,VDivider:b.Z,VIcon:_.Z,VSpacer:S.Z,VToolbar:C.Z,VToolbarTitle:x.qW,VTooltip:w.Z});var Z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("WelcomeDialog"),a("v-tour",{attrs:{name:"explanatoryTour",steps:e.isMobile?e.mobileSteps:e.desktopSteps,callbacks:e.callBacks,options:{highlight:!0}},scopedSlots:e._u([{key:"default",fn:function(t){return[a("transition",{attrs:{name:"fade"}},[t.steps[t.currentStep]?a("v-step",{key:t.currentStep,attrs:{step:t.steps[t.currentStep],"previous-step":t.previousStep,"next-step":t.nextStep,stop:t.stop,skip:t.skip,"is-first":t.isFirst,"is-last":t.isLast,finish:t.finish,labels:t.labels,highlight:t.highlight,enableScrolling:t.enableScrolling}},[[a("div",{attrs:{slot:"header"},slot:"header"},[a("b",[e._v("DASHBOARD TOUR ("+e._s(t.currentStep+1)+"/"+e._s(t.steps.length)+")")])])]],2):e._e()],1)]}}])})],1)},E=[],R=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{width:"900px"},model:{value:e.welcomeDialog,callback:function(t){e.welcomeDialog=t},expression:"welcomeDialog"}},[a("v-card",{staticClass:"pa-10"},[a("v-card-title",{staticClass:"justify-center"},[a("p",{staticClass:"text-h5 font-weight-light"},[e._v("Welcome to Drought Dash!")]),a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:function(t){e.welcomeDialog=!1}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-text",[a("a",{staticClass:"grey--text text--darken-3 font-weight-medium",staticStyle:{"font-size":"14px"},on:{click:function(t){return e.startTour()}}},[a("v-btn",{attrs:{icon:"",color:"orange"}},[a("v-icon",[e._v("mdi-human-male-board")])],1),e._v(" Take a quick tour guide through the Drought Dash and learn how to navigate within it. "),a("v-btn",{attrs:{icon:"",color:"orange"}},[a("v-icon",[e._v("mdi-arrow-right-bold")])],1)],1)])],1)],1)},A=[],D={name:"WelcomeDialog",data:function(){return{welcomeDialog:!1}},computed:(0,l.Z)({},(0,c.rn)({isMobile:function(e){return e.ui.isMobile}})),methods:{startTour:function(){this.isDual&&(this.$store.dispatch("toggleMapAnalysis"),this.$store.dispatch("toggleDual")),this.$tours["explanatoryTour"].start(),this.welcomeDialog=!1}},mounted:function(){var e=this,t="undefined"===typeof window,a=!t&&JSON.parse(localStorage.getItem("welcomeModalHidden"));a||setTimeout((function(){e.welcomeDialog=!0}),1e3),t||localStorage.setItem("welcomeModalHidden",!0)}},L=D,M=(0,p.Z)(L,R,A,!1,null,"533b609e",null),V=M.exports;f()(M,{VBtn:g.Z,VCard:h.Z,VCardText:y.ZB,VCardTitle:y.EB,VDialog:v.Z,VIcon:_.Z,VSpacer:S.Z});var I={name:"Tour",components:{WelcomeDialog:V},computed:(0,l.Z)({},(0,c.rn)({isMobile:function(e){return e.ui.isMobile},showMap:function(e){return e.ui.showMap}})),data:function(){return{callBacks:{onNextStep:this.nextStep,onFinish:this.finishTour},desktopSteps:[{target:'[data-tour-step="aoi"]',content:"Area of Interest configuration Section: Set up admin boundaries. Defaults to East Africa Region",params:{placement:"right",highlight:!0}},{target:'[data-tour-step="aoi-select"]',content:"Select Country or lower admin levels",params:{placement:"right"}},{target:'[data-tour-step="analysis"]',content:"Datasets Section: Toggle layer visibility, switch between dataset tabs, generate graphs, compare layers here",params:{placement:"right"}},{target:'[data-tour-step="remove-layer"]',content:"You can remove a layer on map from here (All available layers for this dataset are listed here)",params:{placement:"right"}},{target:'[data-tour-step="add-layer"]',content:"And add it again here",params:{placement:"top"}},{target:'[data-tour-step="date-params"]',content:"You can also set date parameters for respective layers from here. This will update both the map and the graphs below",params:{placement:"bottom"}},{target:'[data-tour-step="graphs"]',content:"Analysis Section: Depending on the layer selected, the date and area of interest, graphs will be displayed",params:{placement:"right"}},{target:'[data-tour-step="bar-range"]',content:"Adjust start and end year for graph below here",params:{placement:"right"}},{target:'[data-tour-step="map"]',content:"The map section shows all layers enabled from the analysis section. Here you can click, pan, zoom, identify or overlay data.",params:{placement:"left"}},{target:'[data-tour-step="opacity"]',content:"Adjust Layer opacity",params:{placement:"bottom",highlight:!1}},{target:'[data-tour-step="close-layer"]',content:"Remove Layer from map using this 'x' button",params:{placement:"bottom",highlight:!1}},{target:'[data-tour-step="split"]',content:"Compare Layers: Split map into two and compare top and bottom layers. Click on button again to revert to single map",params:{highlight:!1}},{target:'[data-tour-step="compare"]',content:"Compare Layers: Adjust layer parameters to make comparisons between two layers",params:{placement:"bottom"}}],mobileSteps:[{target:'[data-tour-step="aoi"]',content:"Area of Interest configuration Section: Set up admin boundaries. Defaults to East Africa Region",params:{placement:"bottom",highlight:!0}},{target:'[data-tour-step="aoi-select"]',content:"Select Country or lower admin levels",params:{placement:"bottom"}},{target:'[data-tour-step="analysis"]',content:"Datasets Section: Toggle layer visibility, switch between dataset tabs, generate graphs, compare layers here",params:{placement:"top",enableScrolling:!1}},{target:'[data-tour-step="remove-layer"]',content:"You can remove a layer on map from here (All available layers for this dataset are listed here)",params:{placement:"bottom"}},{target:'[data-tour-step="add-layer"]',content:"And add it again here",params:{placement:"bottom"}},{target:'[data-tour-step="date-params"]',content:"You can also set date parameters for respective layers from here. This will update both the map and the graphs below",params:{placement:"bottom"}},{target:'[data-tour-step="graphs"]',content:"Analysis Section: Depending on the layer selected, the date and area of interest, graphs will be displayed",params:{placement:"top",enableScrolling:!1}},{target:'[data-tour-step="bar-range"]',content:"Adjust start and end year for graph below here",params:{placement:"bottom"}},{target:'[data-tour-step="show-map"]',content:'To view the map interface click on the "show map" button',params:{placement:"bottom"}},{target:'[data-tour-step="map"]',content:"The map section shows all layers enabled from the analysis section. Here you can click, pan, zoom, identify or overlay data.",params:{placement:"bottom",highlight:!1}},{target:'[data-tour-step="opacity"]',content:"Adjust Layer opacity",params:{placement:"bottom",enableScrolling:!1,highlight:!1}},{target:'[data-tour-step="close-layer"]',content:"Remove Layer from map using this 'x' button",params:{placement:"bottom",highlight:!1}},{target:'[data-tour-step="show-analysis"]',content:"Close map and go back to analysis from here",params:{placement:"bottom"}},{target:'[data-tour-step="split"]',content:"Compare Layers: Split map into two and compare top and bottom layers. Click on button again to revert to single map",params:{placement:"bottom",highlight:!1}},{target:'[data-tour-step="compare"]',content:"Compare Layers: Adjust layer parameters to make comparisons between two layers",params:{placement:"right"}}]}},methods:{finishTour:function(){this.$store.dispatch("toggleDual"),this.$store.dispatch("toggleMapAnalysis")},nextStep:function(e){this.isMobile||(3===e&&document.querySelector('[data-switch="remove-layer"]').click(),4===e&&document.querySelector('[data-tour-step="add-layer"]').click(),10===e&&document.querySelector('[data-tour-step="split"]').click()),this.isMobile&&(8===e?document.querySelector('[data-tour-step="show-map"]').click():12===e?document.querySelector('[data-tour-step="show-analysis"]').click():13===e&&(document.querySelector('[data-tour-step="split"]').click(),document.querySelector('[data-tour-step="show-map"]').click()))}}},$=I,O=(0,p.Z)($,Z,E,!1,null,"765a5310",null),B=O.exports,N={name:"App",components:{Navbar:k,Tour:B}},P=N,z=a(17524),j=a(67877),G=(0,p.Z)(P,r,o,!1,null,null,null),U=G.exports;f()(G,{VApp:z.Z,VMain:j.Z});var Y=a(78345),F=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isMobile?a("Mobile"):a("Desktop")},W=[],q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",{staticStyle:{height:"100%"},attrs:{"no-gutters":""}},[a("v-col",{staticClass:"overflow-auto analysisContainer",staticStyle:{height:"93vh"},attrs:{sm:"12",md:"6",lg:"7",xl:"6"}},[a("v-row",{staticClass:"grey lighten-4",staticStyle:{"min-height":"300px"},attrs:{"no-gutters":""}},[a("v-col",{staticClass:"lighten-5 px-6 py-6",attrs:{cols:"12"}},[a("AdminConfig")],1)],1),a("v-row",{staticClass:"grey darken-4",attrs:{"no-gutters":""}},[a("v-col",{staticClass:"px-4 py-3",attrs:{cols:"12"}},[a("Analysis")],1)],1)],1),a("v-col",{ref:"mapContainer",staticClass:"mapContainer grey darken-3",staticStyle:{"min-width":"100px","max-width":"100%",height:"auto"}},[a("Map")],1)],1)},H=[],J=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("MapContainer")},Q=[],K=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.loading?a("div",{staticClass:"loader"},[e._m(0)]):a("div",{staticStyle:{height:"100%"}},[e.dual?a("div",{staticStyle:{height:"100%"}},[a("v-row",{staticStyle:{height:"50%"},attrs:{"no-gutters":""}},[a("v-col",[a("MglMap",{attrs:{accessToken:e.accessToken,mapStyle:e.mapStyle,center:e.center,zoom:e.zoom,attributionControl:!1,container:"map-top"},on:{"update:mapStyle":function(t){e.mapStyle=t},"update:map-style":function(t){e.mapStyle=t},load:e.onMapTopLoaded,moveend:e.mapTopSettings}},[a("MglScaleControl",{attrs:{position:"bottom-right"}}),a("MglNavigationControl",{attrs:{position:"top-left"}}),a("Legend",{attrs:{mapContainer:"mapTop"}}),a("div",{staticClass:"float py-2 px-11",staticStyle:{postion:"absolute"}},[e.isMobile?a("v-btn",{attrs:{fab:"","x-small":""},on:{click:e.toggleMapAnalysis}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-close")])],1):e._e()],1)],1)],1)],1),a("v-divider",{staticClass:"white"}),a("v-row",{staticStyle:{height:"50%"},attrs:{"no-gutters":""}},[a("v-col",[a("MglMap",{attrs:{accessToken:e.accessToken,mapStyle:e.mapStyle,center:e.center,zoom:e.zoom,attributionControl:!1,container:"map-bottom"},on:{"update:mapStyle":function(t){e.mapStyle=t},"update:map-style":function(t){e.mapStyle=t},load:e.onMapBottomLoaded,moveend:e.mapBottomSettings}},[a("MglScaleControl",{attrs:{position:"bottom-right"}}),a("MglNavigationControl",{attrs:{position:"top-left"}}),a("Legend",{attrs:{mapContainer:"mapBottom"}})],1)],1)],1)],1):a("MglMap",{attrs:{accessToken:e.accessToken,mapStyle:e.mapStyle,center:e.center,zoom:e.zoom,attributionControl:!1,container:"map-single"},on:{"update:mapStyle":function(t){e.mapStyle=t},"update:map-style":function(t){e.mapStyle=t},load:e.onMapLoaded}},[a("MglScaleControl",{attrs:{position:"bottom-right"}}),a("MglNavigationControl",{attrs:{position:"top-left"}}),a("div",{staticClass:"float-start px-2",staticStyle:{postion:"absolute","padding-top":"110px"}},[e.isMobile?a("v-btn",{attrs:{fab:"","x-small":"","data-tour-step":"show-analysis"},on:{click:e.toggleMapAnalysis}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-close")])],1):e._e()],1),a("Legend")],1)],1)},X=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"lds-ellipsis"},[a("div"),a("div"),a("div"),a("div")])}],ee=(a(21249),a(69826),a(41539),a(47941),a(26699),a(32023),a(69600),a(17889)),te=a(6158),ae=a.n(te),ne=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"float-end ma-2",staticStyle:{postion:"absolute"},attrs:{"data-tour-step":"map"}},[a("v-card",{staticClass:"mx-auto rounded-sm",staticStyle:{"overflow-y":"auto"},attrs:{"max-width":"250px","min-width":"250px","max-height":"85vh",light:""}},[a("v-expansion-panels",{attrs:{multiple:""},model:{value:e.panel,callback:function(t){e.panel=t},expression:"panel"}},[a("v-expansion-panel",[a("v-expansion-panel-header",{staticClass:"subtitle-2 font-weight-medium grey--text text--darken-4"},[e._v(" LEGEND ")]),a("v-expansion-panel-content",{staticClass:"legendPanel"},[e.layers.filter((function(e){return e.visible&&!e.isBoundary})).length>0?a("v-list",{staticClass:"transparent"},[e.isDual?a("DualLegend",{staticStyle:{"max-height":"240px"},attrs:{layers:e.layers.filter((function(e){return e.visible})),mapContainer:e.mapContainer}}):a("SingleLegend")],1):a("v-list",{staticClass:"transparent"},[a("v-divider"),a("v-list-item",[a("v-list-item-title",{staticClass:"text-wrap caption text-center grey--text lighten-1"},[e._v("No layers added ")])],1)],1)],1)],1)],1)],1)],1)},re=[],oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{"data-tour-step":"compare"}},[a("v-list-item",[a("v-select",{staticClass:"rounded-xl period-select",attrs:{items:e.layerFmt,"item-text":"name","item-value":"id",label:"Layer",outlined:"",dense:"","hide-details":"auto"},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1),a("v-list-item",[a("v-list-item-content",[a("v-row",{attrs:{"no-gutters":""}},e._l(e.layers.find((function(t){return t.id===e.selected})).paramsSelectorConfig,(function(t){return a("v-col",{key:t.key},[a("v-select",{ref:"select"+e.mapContainer,refInFor:!0,staticClass:"rounded-xl period-select",attrs:{items:t.options,label:t.sentence.split(" ")[0],"item-text":"label","item-value":"value",outlined:"",dense:"","hide-details":"auto"},on:{input:function(a){e.updateParams(a,e.layers.find((function(t){return t.id===e.selected})),t.key)}}})],1)})),1),a("div",{staticClass:"pt-2"},e._l(e.layers.find((function(t){return t.id===e.selected})).legendConfig.items,(function(t){return a("v-list-item-title",{key:t.title,staticClass:"body-2 text-wrap pt-1",staticStyle:{"font-size":"12px !important"}},[a("v-avatar",{staticClass:"legend-avatar",attrs:{color:t.color,size:"10"}}),e._v(" "+e._s(t.name)+" ")],1)})),1)],1)],1)],1)},ie=[],se=(a(54747),a(74916),a(15306),a(57327),a(92222),a(34553),a(62032)),le=(a(39714),a(56977),a(66412)),ce=function(e,t){var a=null===t||void 0===t?void 0:t.isBoundary;if(a)e.getSource(t.id.toString())||e.getLayer(t.id.toString())||e.addSource(t.id.toString(),t.layerConfig.source);else{var n=t.layerConfig.tiles[0];Object.keys(t.params).forEach((function(e){n=n.replace("{".concat(e,"}"),t.params[e])})),t.visible?e.getSource(t.id.toString())||e.getLayer(t.id.toString())||e.addSource(t.id.toString(),{type:"raster",tiles:[n],minzoom:2,maxzoom:12,tileSize:256}):(e.getLayer(t.id.toString())&&e.removeLayer(t.id.toString()),e.getSource(t.id.toString())&&e.removeSource(t.id.toString()))}},ue=function(e,t,a){if(t.visible&&a)if(!0===t.isBoundary)t.layerConfig.render.layers.map((function(t){e.getLayer(t.id.toString())||e.addLayer(t)}));else{var n,r,o,i,s=e.getStyle().layers,l=(0,se.Z)(s);try{for(l.s();!(i=l.n()).done;){var c=i.value;"level-0-line"===c.id&&(n=c.id),"level-1-line"===c.id&&(r=c.id),"level-2-line"===c.id&&(o=c.id)}}catch(u){l.e(u)}finally{l.f()}e.getLayer(t.id.toString())||(e.addLayer({id:t.id.toString(),type:"raster",source:t.id.toString(),layout:{visibility:"visible"}}),e.moveLayer(n),e.moveLayer(r),e.moveLayer(o))}},de=function(e,t){if(e&&"IGAD"!==t.iso){e.getLayer("admin-level-1-layer")&&(e.removeLayer("admin-level-1-layer"),e.removeLayer("admin-level-1-layer-inner")),e.getSource("admin-level-1")&&e.removeSource("admin-level-1"),e.addSource("admin-level-1",{type:"geojson",data:t}),e.addLayer({id:"admin-level-1-layer",type:"line",source:"admin-level-1",paint:{"line-width":1.5,"line-color":"yellow","line-opacity":1,"line-gap-width":2}}),e.addLayer({id:"admin-level-1-layer-inner",type:"line",source:"admin-level-1",paint:{"line-width":2,"line-color":"#333","line-opacity":1}});var a=(0,le.Z)(t);e.fitBounds(a,{padding:30,easing:function(e){return e},linear:!0,animate:!0})}else if("IGAD"===t.iso){e.getLayer("admin-level-1-layer")&&(e.removeLayer("admin-level-1-layer"),e.removeLayer("admin-level-1-layer-inner")),e.getSource("admin-level-1")&&e.removeSource("admin-level-1"),e.addSource("admin-level-1",{type:"geojson",data:t});var n=(0,le.Z)(t);e.fitBounds(n,{padding:30,easing:function(e){return e},linear:!0,animate:!0})}},pe=function(e,t,a){if(!0===t.isBoundary)t.layerConfig.render.layers.map((function(t){e.getLayer(t.id.toString())||e.addLayer(t)}));else{var n=a.layerConfig.tiles[0];Object.keys(a.params).forEach((function(e){n=n.replace("{".concat(e,"}"),a.params[e])}));var r,o,i,s,l=e.getStyle().layers,c=(0,se.Z)(l);try{for(c.s();!(s=c.n()).done;){var u=s.value;"level-0-line"===u.id&&(r=u.id),"level-1-line"===u.id&&(o=u.id),"level-2-line"===u.id&&(i=u.id)}}catch(d){c.e(d)}finally{c.f()}e.getSource(t.id.toString())&&e.getLayer(t.id.toString())&&(e.removeLayer(t.id.toString()),e.removeSource(t.id.toString()),e.addSource(a.id.toString(),{type:"raster",tiles:[n],minzoom:2,maxzoom:12,tileSize:256}),e.addLayer({id:a.id.toString(),type:"raster",source:a.id.toString()}),e.moveLayer(r),e.moveLayer(o),e.moveLayer(i),e.getLayer("admin-level-1-layer")&&e.moveLayer("admin-level-1-layer"))}},me=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=t.layerConfig.tiles[0];a?Object.keys(a).forEach((function(e){n=n.replace("{".concat(e,"}"),a[e])})):Object.keys(t.params).forEach((function(e){n=n.replace("{".concat(e,"}"),t.params[e])}));var r,o,i,s,l=e.getStyle().layers,c=(0,se.Z)(l);try{for(c.s();!(s=c.n()).done;){var u=s.value;"level-0-line"===u.id&&(r=u.id),"level-1-line"===u.id&&(o=u.id),"level-2-line"===u.id&&(i=u.id)}}catch(d){c.e(d)}finally{c.f()}e.getSource(t.id.toString())&&e.getLayer(t.id.toString())&&(e.removeLayer(t.id.toString()),e.removeSource(t.id.toString()),e.addSource(t.id.toString(),{type:"raster",tiles:[n],minzoom:2,maxzoom:12,tileSize:256}),e.addLayer({id:t.id.toString(),type:"raster",source:t.id.toString()},r),e.moveLayer(o),e.moveLayer(i),e.getLayer("admin-level-1-layer")&&e.moveLayer("admin-level-1-layer"))},fe=function(e,t){e.on("click",(function(a){t&&(new(ae().Popup)).setLngLat(a.lngLat).setHTML("<p>Lng: ".concat(a.lngLat.lng.toFixed(2),", Lat: ").concat(a.lngLat.lat.toFixed(2),"</p> <p> Value: ").concat(t.properties.current_cdi)).addTo(e)}))},ge={name:"DualLegend",props:["layers","mapContainer"],data:function(){return{selected:this.layers[this.layers.length-1].id,period:null}},computed:(0,l.Z)((0,l.Z)({},(0,c.rn)({boundaries:function(e){return e.boundary.boundaries}})),{},{paramSentence:function(){var e=this,t=this.layers.find((function(t){return t.id===e.selected})),a=t.paramsSentenceTemplate;return Object.keys(t.params).forEach((function(e){a=a.replace("{".concat(e,"}"),t.params[e])})),a},layerFmt:function(){var e=this.layers.filter((function(e){return!(null!==e&&void 0!==e&&e.isBoundary)}));return e}}),mounted:function(){var e=this,t=[],a=this.layers.find((function(t){return t.id===e.selected&&t.visible})),n=this.layers.filter((function(e){return e.isBoundary}));t=n.concat([a]),t.map((function(t){ce(e.$store[e.mapContainer],t,e.boundaries),ue(e.$store[e.mapContainer],t,e.boundaries)})),a.paramsSelectorConfig.map((function(t){var n=Object.keys(a.params).findIndex((function(e){return e===t.key}));e.$refs["select"+e.mapContainer][n].setValue(a.params[t.key])}))},watch:{selected:{handler:function(e,t){var a=this,n=this.layers.find((function(e){return e.id===t})),r=this.layers.find((function(t){return t.id===e}));pe(this.$store[this.mapContainer],n,r,this.boundaries),r.paramsSelectorConfig.map((function(e){var t,n=Object.keys(r.params).findIndex((function(t){return t===e.key}));console.log(a.$refs["select"+a.mapContainer]),null===(t=a.$refs["select"+a.mapContainer][n])||void 0===t||t.setValue(r.params[e.key])}))}}},methods:{updateParams:function(e,t,a){t.params["".concat(a)]=e,console.log(t),me(this.$store[this.mapContainer],t,t.params)}}},he=ge,ye=a(26370),ve=a(82102),be=a(97620),_e=a(94051),Se=a(62877),Ce=a(68994),xe=(0,p.Z)(he,oe,ie,!1,null,null,null),we=xe.exports;f()(xe,{VAvatar:ye.Z,VCol:ve.Z,VListItem:be.Z,VListItemContent:_e.km,VListItemTitle:_e.V9,VRow:Se.Z,VSelect:Ce.Z});var Te=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("draggable",e._l(e.layers,(function(t){return a("div",{key:t.id,staticStyle:{"background-color":"white",cursor:"-webkit-grab"}},[t.visible&&!t.isBoundary?a("v-list-item",[a("v-list-item-content",{staticClass:"px-1"},[a("v-row",{staticClass:"pt-2",attrs:{"no-gutters":""}},[a("v-col",{attrs:{cols:"8"}},[a("p",{staticClass:"body-2 font-weight-medium grey--text text--darken-3"},[e._v(" "+e._s(t.legendConfig.title)+" ")])]),a("v-col",[a("v-icon",{staticClass:"float-end py-1",attrs:{small:"","data-tour-step":"close-layer"},on:{click:function(a){return e.removeLayer(t)}}},[e._v("mdi-close")]),a("v-tooltip",{attrs:{top:"","x-small":"","nudge-bottom":"10",transition:"scroll-y-transition"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-icon",e._g(e._b({staticClass:"float-end py-1",attrs:{small:"","data-tour-step":"opacity"}},"v-icon",r,!1),n),[e._v("mdi-opacity")])]}}],null,!0)},[a("span",[e._v("Opacity (100%)")])])],1)],1),a("v-list-item-title",{staticClass:"pb-2"},[a("p",{staticClass:"grey--text text--darken-2",staticStyle:{"font-size":"12px"}},[e._v(" ( "+e._s(e.paramSentence(t))+" ) ")])]),e._l(t.legendConfig.items,(function(t){return a("v-list-item-title",{key:t.title,staticClass:"body-2 text-wrap",staticStyle:{"font-size":"12px !important"}},[a("v-avatar",{staticClass:"legend-avatar",attrs:{color:t.color,size:"10"}}),e._v(" "+e._s(t.name)+" ")],1)}))],2)],1):e._e(),t.visible?a("v-divider"):e._e()],1)})),0)],1)},ke=[],Ze=a(9980),Ee=a.n(Ze),Re={name:"SinglLegend",components:{draggable:Ee()},data:function(){return{dialog:!1,yearRange:[2001,2022],startYear:2001,endYear:2022}},computed:(0,l.Z)({},(0,c.Se)({layers:"getActiveLayers"})),methods:{removeLayer:function(e){this.$store.dispatch("toggleLayerVisibility",{layerId:e.id})},paramSentence:function(e){var t=e.paramsSentenceTemplate;return Object.keys(e.params).forEach((function(a){t=t.replace("{".concat(a,"}"),e.params[a])})),t}}},Ae=Re,De=(0,p.Z)(Ae,Te,ke,!1,null,"02bd5039",null),Le=De.exports;f()(De,{VAvatar:ye.Z,VCol:ve.Z,VDivider:b.Z,VIcon:_.Z,VListItem:be.Z,VListItemContent:_e.km,VListItemTitle:_e.V9,VRow:Se.Z,VTooltip:w.Z});var Me={name:"Legend",components:{SingleLegend:Le,DualLegend:we},props:["mapContainer"],data:function(){return{panel:[0]}},computed:(0,l.Z)((0,l.Z)({},(0,c.rn)({isDual:function(e){return e.mapContainer.isDual}})),(0,c.Se)({layers:"getActiveLayers"}))},Ve=Me,Ie=a(56845),$e=a(72443),Oe=a(1192),Be=a(55630),Ne=a(16816),Pe=(0,p.Z)(Ve,ne,re,!1,null,null,null),ze=Pe.exports;f()(Pe,{VCard:h.Z,VDivider:b.Z,VExpansionPanel:Ie.Z,VExpansionPanelContent:$e.Z,VExpansionPanelHeader:Oe.Z,VExpansionPanels:Be.Z,VList:Ne.Z,VListItem:be.Z,VListItemTitle:_e.V9});var je=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-card",{attrs:{light:""}},[a("v-card-text",[a("h3",{staticClass:"font-weight-regular pb-2"},[e._v("East Africa Boundaries")]),a("b",[e._v(e._s(e.params.locationName))]),e._v(", with a total area of "),a("b",[e._v(e._s(e.formatArea)+" ha")])]),a("div",{staticClass:"text-center"},[a("v-btn",{staticClass:"px-14",attrs:{rounded:"",dark:""},on:{click:function(t){return e.analyzeArea()}}},[e._v(" Analyze ")])],1)],1)],1)},Ge=[],Ue=a(85324),Ye={name:"Popup",props:["params"],computed:{formatArea:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return(0,Ue.WU)(".3s")(this.params.area).replace("G",e?"B":" billion").replace("M",e?"M":" million").replace("K",e?"K":" thousand")}},methods:{analyzeArea:function(){var e=this.params,t=e.level,a=e.gid_0,n=e.gid_1,r=e.gid_2;2===t?(this.$store.commit("UPDATE_COUNTRY",a),this.$store.commit("UPDATE_REGION",n),this.$store.commit("UPDATE_SUBREGION",r),this.$store.dispatch("fetchBoundaries",{country:a,level:t+1,region:n,subregion:r})):1===t?(this.$store.commit("UPDATE_COUNTRY",a),this.$store.dispatch("fetchBoundaries",{country:a,level:t+1,region:n,subregion:null}),this.$store.commit("UPDATE_REGION",n)):0===t&&(this.$store.commit("UPDATE_COUNTRY",a),this.$store.dispatch("fetchBoundaries",{country:a,level:t+1,region:null,subregion:null}));var o=document.getElementsByClassName("mapboxgl-popup");o.length&&o[0].remove()}}},Fe=Ye,We=(0,p.Z)(Fe,je,Ge,!1,null,null,null),qe=We.exports;f()(We,{VBtn:g.Z,VCard:h.Z,VCardText:y.ZB});var He=n.Z.extend(qe),Je=!1,Qe={name:"MapContainer",components:{MglMap:ee.Q3,MglNavigationControl:ee.RV,MglScaleControl:ee.RQ,Legend:ze},data:function(){return{accessToken:"pk.eyJ1IjoiZ3JhY2VhbW9uZGkiLCJhIjoiY2s4dGphcGQwMDBhcjNmcnkzdGk3MnlrZCJ9.54r40Umo0l3dHseEbrQpUg",mapStyle:"mapbox://styles/graceamondi/cl1dtal7k00fb15muz5huqg5a",center:[36.6235,5.92859],zoom:3.7,loading:!0,rasterLayer:{type:"raster"}}},mounted:function(){this.$store.map=null,this.$store.mapTop=null,this.$store.mapBottom=null,this.subscribeToStore(),this.loading=!1},computed:(0,l.Z)((0,l.Z)({},(0,c.rn)({dual:function(e){return e.mapContainer.isDual},boundaries:function(e){return e.boundary.boundaries},source:function(e){return e.layer.layerConfig},infoUrl:function(e){return e.layer.infoUrl},featureInfo:function(e){return e.layer.featureInfo},isMobile:function(e){return e.ui.isMobile},showMap:function(e){return e.ui.showMap}})),(0,c.Se)({layers:"getActiveLayers"})),watch:{showMap:{handler:function(){this.dual?(this.$store.mapTop.resize(),this.$store.mapBottom.resize()):this.$store.map.resize()}}},methods:{toggleMapAnalysis:function(){this.$store.dispatch("toggleMapAnalysis")},mapTopSettings:function(e){this.$store.mapTop=e.map,Je||(Je=!0,this.$store.mapBottom.stop(),this.$store.mapBottom.jumpTo({center:this.$store.mapTop.getCenter(),zoom:this.$store.mapTop.getZoom()}),Je=!1)},mapBottomSettings:function(e){this.$store.mapBottom=e.map,Je||(Je=!0,this.$store.mapTop.stop(),this.$store.mapTop.jumpTo({center:this.$store.mapBottom.getCenter(),zoom:this.$store.mapBottom.getZoom()}),Je=!1)},onMapLoaded:function(e){var t=this;this.$store.map=e.map,de(this.$store.map,this.boundaries),0===this.layers.length?this.$store.dispatch("setLayers",{}):this.layers.map((function(e){ce(t.$store.map,e,t.boundaries),ue(t.$store.map,e,t.boundaries)})),this.$store.map.on("click",(function(e){var a=[[e.point.x-5,e.point.y-5],[e.point.x+5,e.point.y+5]],n=t.$store.map.queryRenderedFeatures(a,{}),r=n[0].properties,o=r.level,i=r.gid_0,s=r.gid_1,l=r.gid_2,c=r.name_1,u=r.name_0,d=r.area,p=r["name_".concat(o||"0")];i||(p=r[Object.keys(r).find((function(e){return e.includes("name")}))]);var m=[p];2===o?m=[p,c,u]:1===o&&(m=[p,u]);var f=m.join(", ");console.log("Map popup",n),console.log("Level",o),console.log("Location Name",f);var g=(new(ae().Popup)).setLngLat(e.lngLat).setHTML('<div id="popup-content"></div>').addTo(t.$store.map),h={locationName:f,area:d,level:o,gid_0:i,gid_1:s,gid_2:l},y=new He({store:t.$store,propsData:{params:h}});y.$mount("#popup-content"),g._update()}))},onMapTopLoaded:function(e){this.$store.mapTop=e.map,de(this.$store.mapTop,this.boundaries)},onMapBottomLoaded:function(e){this.$store.mapBottom=e.map,de(this.$store.mapBottom,this.boundaries)},subscribeToStore:function(){var e=this;this.dataUnsubscribe=this.$store.subscribe((function(t){switch(t.type){case"SET_LAYERS":e.dual||e.layers.map((function(t){ce(e.$store.map,t,e.boundaries),ue(e.$store.map,t,e.boundaries)}));break;case"SET_FEATURE_INFO":fe(e.$store.map,e.featureInfo);break;case"TOGGLE_LAYER_VISIBILITY":e.toggleVisibility();break;case"SET_BOUNDARY":e.dual?(de(e.$store.mapTop,e.boundaries),de(e.$store.mapBottom,e.boundaries)):de(e.$store.map,e.boundaries);break;case"RESET_BOUNDARY":e.dual?(de(e.$store.mapTop,e.boundaries),de(e.$store.mapBottom,e.boundaries)):de(e.$store.map,e.boundaries);break;case"TOGGLE_DUAL":e.zoom=e.dual?2.6:3.7;break}}))},toggleVisibility:function(){var e=this;this.dual||this.layers.map((function(t){ce(e.$store.map,t,e.boundaries),ue(e.$store.map,t,e.boundaries)}))}}},Ke=Qe,Xe=(0,p.Z)(Ke,K,X,!1,null,null,null),et=Xe.exports;f()(Xe,{VBtn:g.Z,VCol:ve.Z,VDivider:b.Z,VIcon:_.Z,VRow:Se.Z});var tt={name:"Map",components:{MapContainer:et}},at=tt,nt=(0,p.Z)(at,J,Q,!1,null,null,null),rt=nt.exports,ot=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{"data-tour-step":"aoi"}},[a("v-container",[a("v-row",{staticClass:"admin justify-center"},[a("v-col",{attrs:{sm:"12",md:"12",lg:"7",xl:"7"}},[a("div",{staticClass:"pb-6"},[e.isMobile?a("v-btn",{staticClass:"float-end",attrs:{rounded:"","x-small":"",dark:"","data-tour-step":"show-map"},on:{click:e.toggleMapAnalysis}},[e._v(" Show map ")]):e._e()],1),!e.isMobile&&e.isMobile?a("div",{staticClass:"pb-8"},[a("Report")],1):e._e(),e.selectedCountry?e._e():a("p",{staticStyle:{"font-size":"35px"}},[e._v("East Africa")]),a("v-select",{attrs:{"data-tour-step":"aoi-select",items:e.countries,"item-text":"name",label:"Select country","single-line":"","item-value":"id",clearable:""},on:{input:function(t){return e.updateCountry(1)}},model:{value:e.selectedCountry,callback:function(t){e.selectedCountry=t},expression:"selectedCountry"}}),e.selectedCountry?a("v-select",{attrs:{loading:e.regions.length<=0,items:e.regions,"item-text":"name","item-value":"id",label:"Select a region","single-line":"",clearable:""},on:{input:function(t){return e.updateCountry(2)}},model:{value:e.selectedRegion,callback:function(t){e.selectedRegion=t},expression:"selectedRegion"}}):e._e(),e.selectedRegion?a("v-select",{attrs:{loading:e.subRegions.length<=0,items:e.subRegions,"item-text":"name","item-value":"id",label:"Select a region","single-line":"",clearable:""},on:{input:function(t){return e.updateCountry(3)}},model:{value:e.selectedSubRegion,callback:function(t){e.selectedSubRegion=t},expression:"selectedSubRegion"}}):e._e()],1)],1)],1)],1)},it=[],st=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"float-end",attrs:{rounded:"",small:"",dark:""}},"v-btn",r,!1),n),[e._v(" Generate report ")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("nav",[a("v-toolbar",{staticStyle:{color:"#f5c10d"},attrs:{flat:"",dark:"",fixed:""}},[a("v-btn",{attrs:{icon:"",dark:""},on:{click:function(t){e.dialog=!1}}},[a("v-icon",[e._v("mdi-close")])],1),a("v-toolbar-title",{staticStyle:{"font-size":"16px","font-weight":"bold"}},[e._v("GENERATE REPORT "),e.place.country?a("span",[e._v(" ("+e._s(e.place.country)+e._s(e.place.region)+e._s(e.place.subregion)+") ")]):a("span",[e._v("(East Africa)")])]),a("v-spacer"),a("v-toolbar-items",[a("v-btn",{attrs:{dark:"",text:""},on:{click:function(t){return e.generatePDF()}}},[e._v(" Download ")])],1)],1)],1),a("v-container",e._l(e.layers,(function(t){return a("div",{key:t.id,staticStyle:{position:"inherit !important",all:"inherit !important"},attrs:{slot:"pdf-content"},slot:"pdf-content"},["ppt_gpcc"===t.slug||"fapar_absorbed"===t.slug||t.isBoundary?e._e():a("div",[a("v-card",{staticStyle:{"border-bottom":"1px #9ea2a4 solid !important",display:"flex !important","align-items":"center !important","box-shadow":"0px 3px 1px -2px rgb(0 0 0 / 20%),"},attrs:{dark:"","min-height":"794px",elevation:"24",raised:""}},[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{attrs:{cols:"3"}},[a("v-card",{staticClass:"rounded-r-xl",attrs:{light:"","min-height":"734px"}},[a("v-card-title",{staticClass:"text-uppercase grey--text text--darken-4",staticStyle:{"font-size":"16px","word-break":"break-word"}},[e._v(e._s(t.name))]),a("v-card-subtitle",{staticClass:"text-uppercase grey--text text--darken-3"},[e.place.country?a("span",[e._v(" "+e._s(e.place.country)+e._s(e.place.region)+e._s(e.place.subregion)+" ")]):a("span",[e._v(" East Africa")])]),a("v-card-text",{staticClass:"grey--text text--darken-4"},[e._v(" "+e._s(t.description)+" ")]),a("v-divider"),a("v-card-text",[a("v-textarea",{staticStyle:{"line-height":"0.375rem !important","letter-spacing":"0.0071428571em !important","font-size":"0.875rem !important"},attrs:{name:"input-7-1",label:"Add Description",value:"Analysis shows a high prevalence of rainfall deficit covering more than half of the region. Traces of Soil Moisture Deficit and Vegetation Stress appear mostly in parts of Kenya, Ethiopia and Tanzania.",hint:"Maximum words, 1000","auto-grow":""}})],1)],1)],1),a("v-col",{staticClass:"float-start",attrs:{cols:"4"}},[a("ParameterMap",{attrs:{layer:t}})],1),a("v-col",{attrs:{cols:"5"}},[t.analysisConfig.pieChart?a("Pie",{staticStyle:{width:"100%"},attrs:{layer:t}}):e._e()],1)],1)],1)],1)])})),0)],1)],1)},lt=[],ct=(a(68309),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-chart",{ref:"barChart",staticClass:"chart px-4 my-5 text-wrap",staticStyle:{height:"480px"},attrs:{option:e.option,theme:e.theme,autoresize:"",loading:e.loading,"loading-options":e.loadingOptions}})],1)}),ut=[],dt=a(34297),pt={props:["layer"],data:function(){return{option:{title:{text:"Population exposed in affected areas",left:"left"},textStyle:{},legend:{data:[],bottom:0},tooltip:{},toolbox:{show:!0,feature:{mark:{show:!0},dataView:{show:!0,readOnly:!1},saveAsImage:{show:!0}},top:0},series:{type:"pie",radius:["20%","60%"],center:["50%","55%"],itemStyle:{borderRadius:8,margin:100},data:[]}},loadingOptions:{maskColor:"transparent",spinnerRadius:20,text:"",lineWidth:3,color:"#f6ca0a"}}},components:{VChart:dt.ZP},computed:(0,l.Z)((0,l.Z)((0,l.Z)({},(0,c.rn)({theme:function(e){return e.chart.theme},pieData:function(e){return e.chart.pieData},countries:function(e){return e.boundary.countryNames},subregions:function(e){return e.boundary.subRegionNames},regions:function(e){return e.boundary.regionNames},loading:function(e){return e.chart.pieLoading}})),(0,c.Se)({places:"selectedPlaces"})),{},{place:function(){var e=this,t={country:"",region:"",subregion:""};return this.places.subregion&&(t.subregion="".concat(this.subregions.find((function(t){return t.id===e.places.subregion})).name,", ")),this.places.region&&(t.region="".concat(this.regions.find((function(t){return t.id===e.places.region})).name,", ")),this.places.country&&(t.country="".concat(this.countries.find((function(t){return t.id===e.places.country})).name)),t}}),mounted:function(){this.subscribeToStore()},methods:{subscribeToStore:function(){var e=this;this.dataUnsubscribe=this.$store.subscribe((function(t){switch(t.type){case"SET_PIE_DATA":e.fetchData();break}}))},fetchData:function(){var e=this,t=[];this.pieData.filter((function(e){return"partial_recovery"!==e.category&&"full_recovery"!==e.category&&"no_data"!==e.category})).map((function(a){t.push({value:Math.round(a.population),name:a.category,itemStyle:{color:e.layer.analysisConfig.color[e.layer.analysisConfig.dimensions.findIndex((function(e){return e===a.category}))-1]}})}));var a={"01":"1st",11:"2nd",21:"3rd"},n={"01":"January","02":"February","03":"March","04":"April","05":"May","06":"June","07":"July","08":"August","09":"September",10:"October",11:"November",12:"December"};this.place.country||this.place.region||this.place.subregion?this.option.title.subtext="On the ".concat(a[this.layer.params.selectedTenDays]," TenDay Period of ").concat(n[this.layer.params.selectedMonth],", ").concat(this.layer.params.selectedYear)+"\n".concat(this.place.subregion)+"".concat(this.place.region)+"".concat(this.place.country):this.option.title.subtext="On the ".concat(a[this.layer.params.selectedTenDays]," TenDay Period of ").concat(n[this.layer.params.selectedMonth],", ").concat(this.layer.params.selectedYear)+"\nIn East Africa",this.option.series.data=t,this.option.legend.data=[],this.option.series.data.map((function(t){e.option.legend.data.push(t.name)}))}}},mt=pt,ft=(0,p.Z)(mt,ct,ut,!1,null,"40b8ec96",null),gt=ft.exports,ht=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.base64MapImg&&!e.loading?a("img",{staticClass:"float-end",staticStyle:{"max-width":"100%","max-height":"100%"},attrs:{src:e.base64MapImg,alt:"",height:"auto"}}):a("div",{staticClass:"loader"},[e._m(0)])},yt=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"lds-ellipsis"},[a("div"),a("div"),a("div"),a("div")])}],vt=a(9669),bt={name:"ParameterMap",props:["layer"],data:function(){return{loading:!0,base64MapImg:null}},computed:(0,l.Z)({},(0,c.rn)({boundaries:function(e){return e.boundary.boundaries}})),mounted:function(){this.fetchMap(),this.subscribeToStore()},watch:{layer:{handler:function(){this.loading=!0,this.fetchMap()},deep:!0}},methods:{subscribeToStore:function(){var e=this;this.dataUnsubscribe=this.$store.subscribe((function(t){switch(t.type){case"SET_BOUNDARY":e.loading=!0,e.fetchMap();break;case"RESET_BOUNDARY":e.loading=!0,e.fetchMap();break}}))},fetchMap:function(){var e=this,t=this.layer.layerConfig.tiles[0];Object.keys(this.layer.params).forEach((function(a){t=t.replace("{".concat(a,"}"),e.layer.params[a])}));var a=24e4,n={width:500,height:735,padding:25,ratio:1,bounds:(0,le.Z)(this.boundaries),style:{version:8,sprite:"https://eahazardswatch.icpac.net/tileserver-gl/styles/eahw/sprite",sources:{basemap:{type:"raster",tiles:["https://api.mapbox.com/styles/v1/graceamondi/cl1dtal7k00fb15muz5huqg5a/tiles/256/{z}/{x}/{y}@2x?access_token=pk.eyJ1IjoiZ3JhY2VhbW9uZGkiLCJhIjoiY2s4dGphcGQwMDBhcjNmcnkzdGk3MnlrZCJ9.54r40Umo0l3dHseEbrQpUg"],tileSize:256},boundaries:{type:"vector",tiles:["https://eahazardswatch.icpac.net/pg/tileserv/pgadapter.ea_gadm36_political_boundaries/{z}/{x}/{y}.pbf"]},admin_boundary:{type:"geojson",data:this.boundaries},parameter_layer:{type:"raster",tiles:[t],minzoom:2,maxzoom:12,tileSize:256},labels:{type:"raster",tiles:["https://eahazardswatch.icpac.net/tileserver-gl/styles/labels_dark/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"basemap",type:"raster",source:"basemap"},{id:"parameter_layer",type:"raster",source:"parameter_layer"},{id:"boundaries_lvl_1",type:"line",source:"boundaries","source-layer":"pgadapter.ea_gadm36_political_boundaries",filter:["==","level",0],layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#8a8a8a","line-width":1,"line-opacity":.5}},{id:"boundaries_lvl_2",type:"line",source:"boundaries","source-layer":"pgadapter.ea_gadm36_political_boundaries",filter:["==","level",1],layout:{"line-join":"round","line-cap":"round"},paint:"IGAD"===this.boundaries.iso?{"line-color":"transparent"}:{"line-color":"#8a8a8a","line-width":1,"line-opacity":.3}},{id:"admin-level-1-layer",type:"line",source:"admin_boundary",paint:"IGAD"===this.boundaries.iso?{"line-color":"transparent"}:{"line-width":1.5,"line-color":"yellow","line-opacity":1,"line-gap-width":2}},{id:"admin-level-1-layer-inner",type:"line",source:"admin_boundary",paint:"IGAD"===this.boundaries.iso?{"line-color":"transparent"}:{"line-width":2,"line-color":"#333","line-opacity":1}}]}};(0,vt.create)({timeout:a}).post("https://eahazardswatch.icpac.net/mbgl-renderer/render/",(0,l.Z)({},n),{responseType:"blob"}).then((function(e){return new Promise((function(t){var a=new FileReader;a.readAsDataURL(e.data),a.onload=function(){t(this.result)}}))})).then((function(t){e.base64MapImg=t,e.loading=!1})).catch((function(t){e.base64MapImg=null,e.loading=!0,console.log("Error encountered when creating static Map",t)}))}}},_t=bt,St=(0,p.Z)(_t,ht,yt,!1,null,null,null),Ct=St.exports,xt={name:"Report",components:{Pie:gt,ParameterMap:Ct},computed:(0,l.Z)((0,l.Z)((0,l.Z)({},(0,c.rn)({countries:function(e){return e.boundary.countryNames},subregions:function(e){return e.boundary.subRegionNames},regions:function(e){return e.boundary.regionNames}})),(0,c.Se)({layers:"getActiveLayers",places:"selectedPlaces"})),{},{place:function(){var e=this,t={country:"",region:"",subregion:""};return this.places.country&&(t.country=this.countries.find((function(t){return t.id===e.places.country})).name),this.places.region&&(t.region=", ".concat(this.regions.find((function(t){return t.id===e.places.region})).name)),this.places.subregion&&(t.subregion=", ".concat(this.subregions.find((function(t){return t.id===e.places.subregion})).name)),t}}),data:function(){return{dialog:!1,htmlToPdfOptions:{margin:0,filename:"hehehe.pdf",image:{type:"jpeg",quality:2},enableLinks:!1,html2canvas:{scale:1,useCORS:!0},jsPDF:{format:"a4",orientation:"landscape"}}}},methods:{onProgress:function(e){console.log("Processed: ".concat(e," / 100"))},hasGenerated:function(){alert("PDF generated successfully!")},generatePDF:function(){this.$refs.html2Pdf.generatePdf()}}},wt=xt,Tt=a(99846),kt=a(34350),Zt=(0,p.Z)(wt,st,lt,!1,null,null,null),Et=Zt.exports;f()(Zt,{VBtn:g.Z,VCard:h.Z,VCardSubtitle:y.Qq,VCardText:y.ZB,VCardTitle:y.EB,VCol:ve.Z,VContainer:Tt.Z,VDialog:v.Z,VDivider:b.Z,VIcon:_.Z,VRow:Se.Z,VSpacer:S.Z,VTextarea:kt.Z,VToolbar:C.Z,VToolbarItems:x.lj,VToolbarTitle:x.qW});var Rt={components:{Report:Et},computed:(0,l.Z)((0,l.Z)({},(0,c.rn)({countries:function(e){return e.boundary.countryNames},regions:function(e){return e.boundary.regionNames},subRegions:function(e){return e.boundary.subRegionNames},boundary:function(e){return e.boundary.boundaries},isMobile:function(e){return e.ui.isMobile}})),{},{selectedCountry:{get:function(){return this.$store.state.boundary.selectedCountry},set:function(e){return this.$store.commit("UPDATE_COUNTRY",e)}},selectedRegion:{get:function(){return this.$store.state.boundary.selectedRegion},set:function(e){return this.$store.commit("UPDATE_REGION",e)}},selectedSubRegion:{get:function(){return this.$store.state.boundary.selectedSubRegion},set:function(e){return this.$store.commit("UPDATE_SUBREGION",e)}}}),methods:{toggleMapAnalysis:function(){this.$store.dispatch("toggleMapAnalysis"),this.$store.map.resize()},updateCountry:function(e){1===e&&(this.selectedRegion=null,this.selectedSubRegion=null),2===e&&(this.selectedSubRegion=null),this.selectedCountry||this.selectedRegion||this.selectedSubRegion?!this.selectedCountry||this.selectedRegion||this.selectedSubRegion?this.selectedCountry&&this.selectedRegion&&!this.selectedSubRegion&&(e=2):e=1:e=0,0!==e||this.selectedCountry?this.$store.dispatch("fetchBoundaries",{country:this.selectedCountry,level:e,region:this.selectedRegion,subregion:this.selectedSubRegion}):this.$store.dispatch("resetBoundary")}}},At=Rt,Dt=(0,p.Z)(At,ot,it,!1,null,null,null),Lt=Dt.exports;f()(Dt,{VBtn:g.Z,VCol:ve.Z,VContainer:Tt.Z,VRow:Se.Z,VSelect:Ce.Z});var Mt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("DatasetTabs",{staticStyle:{"align-self":"center"},attrs:{"data-tour-step":"analysis"}})],1)},Vt=[],It=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.loading?a("div",{staticClass:"loader"},[e._m(0)]):a("div",[e.datasets.length?a("v-tabs",{attrs:{"icons-and-text":"","show-arrows":"","background-color":"grey darken-4",dark:"",centered:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("v-tabs-slider"),e._l(e.datasets,(function(t){return a("div",{key:t.id},[a("v-tab",{attrs:{href:"#"+t.id}},[a("p",[e._v(e._s(t.name))]),a("v-icon",{attrs:{small:""}},[e._v("mdi-"+e._s(t.icon))])],1)],1)}))],2):e._e(),a("v-tabs-items",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.datasets,(function(e){return a("v-tab-item",{key:e.id,attrs:{value:e.id}},[a("AnalysisContainer",{attrs:{datasetName:e.name}})],1)})),1)],1)},$t=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"lds-ellipsis"},[a("div"),a("div"),a("div"),a("div")])}],Ot=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-card",{staticClass:"overflow-visible",attrs:{flat:""}},[a("LayerTabs",{attrs:{datasetName:e.datasetName}})],1)],1)},Bt=[],Nt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.filterDatasets?a("v-row",{staticClass:"grey darken-4 justify-center"},[a("v-col",{attrs:{sm:"12",md:"12",lg:"11",xl:"11"}},[a("v-card",{staticClass:"overflow-visible my-3 pa-6",attrs:{flat:"",dark:"",outlined:""}},[a("p",{staticClass:"grey--text text--lighten-2"},[e._v(" Explore interactive charts and maps that summarize prevalence and trend in drought intensity and frequency "),e.place.country?a("span",{staticClass:"white--text text--darken-1 font-weight-bold"},[e._v(" in "+e._s(e.place.country)+e._s(e.place.region)+e._s(e.place.subregion))]):e._e(),e._v(". ")]),a("span",{domProps:{innerHTML:e._s(e.filterDatasets.content)}}),a("div",{attrs:{"data-tour-step":"remove-layer"}},e._l(e.filterDatasets.layers,(function(t){return a("v-switch",{key:t.key,staticClass:"py-0",attrs:{color:"#f5c10d","input-value":t.visible,label:t.name,"data-switch":"remove-layer"},on:{click:function(a){return e.toggleLayerVisibility(t.id)}}})})),1)]),e._l(e.filterDatasets.layers,(function(t){return a("v-card",{key:t.id,staticClass:"rounded-lg grey--text text--lighten-2 my-3",attrs:{dark:"",outlined:""}},[a("v-card-title",[a("v-row",[a("v-col",[a("p",{staticStyle:{"word-break":"break-word"}},[e._v(e._s(t.name))])]),a("v-col",[t.visible?a("v-btn",{staticClass:"float-end",attrs:{rounded:"",small:"",light:"","data-tour-step":"add-layer"},on:{click:function(a){return e.toggleLayerVisibility(t.id)}}},[e._v(" Remove Layer ")]):a("v-btn",{staticClass:"float-end",attrs:{"data-tour-step":"add-layer",rounded:"",small:""},on:{click:function(a){return e.toggleLayerVisibility(t.id)}}},[e._v(" Show on map ")])],1)],1)],1),a("LayerControls",{staticClass:"pa-3",attrs:{layer:t}}),a("div",{attrs:{"data-tour-step":"graphs"}},[a("v-card",{staticClass:"ma-3",attrs:{outlined:""}},[t.analysisConfig.pieChart?a("Pie",{attrs:{layer:t}}):e._e(),a("v-divider"),t.analysisConfig.barChart?a("v-row",{staticClass:"pt-4 px-4",attrs:{"data-tour-step":"bar-range"}},[a("v-col",{attrs:{sm:"5",md:"5",lg:"5",xl:"5",xs:"6"}},[a("v-select",{ref:"startYear",refInFor:!0,staticClass:"rounded-xl period-select",attrs:{items:e.yearLs(t),"item-text":"label","item-value":"value",label:"Start Year",outlined:"",dense:"",value:t.analysisConfig.barRange[0],rules:[function(e){return e&&e<=t.analysisConfig.barRange[1]||"Must be less than end year"}],"hide-details":"auto"},on:{input:function(a){return e.setBarRange(t)}}})],1),a("v-spacer"),a("v-col",{attrs:{sm:"5",md:"5",lg:"5",xl:"5",xs:"6"}},[a("v-select",{ref:"endYear",refInFor:!0,staticClass:"rounded-xl period-select",attrs:{items:e.yearLs(t),"item-text":"label","item-value":"value",label:"End Year",outlined:"",dense:"",value:t.analysisConfig.barRange[1],rules:[function(e){return e&&e>=t.analysisConfig.barRange[0]||"Must be greater than start year"}],"hide-details":"auto"},on:{input:function(a){return e.setBarRange(t)}}})],1)],1):e._e(),t.analysisConfig.barChart?a("Bar",{attrs:{layer:t}}):e._e()],1)],1)],1)}))],2)],1):e._e()},Pt=[],zt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("PeriodSelector",{attrs:{layer:e.layer}})],1)},jt=[],Gt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-item-group",{attrs:{dark:""}},[a("v-row",{attrs:{"no-gutters":""}},[e._l(e.layer.paramsSelectorConfig,(function(t){return a("v-col",{key:t.key,staticClass:"px-1",attrs:{sm:"2",xs:"12",md:"2",lg:"2",xl:"2","data-tour-step":"date-params"}},[a("v-item",[a("v-select",{ref:"param",refInFor:!0,staticClass:"rounded-xl period-select",attrs:{items:t.options,label:t.sentence.split(" ")[0],"item-text":"label","item-value":"value",outlined:"",value:e.layer.params[t.key],dense:"",disabled:e.isDual},on:{input:function(a){return e.updateParams(a,t.key)}}})],1)],1)})),a("v-spacer"),a("Metadata",{attrs:{layer:e.layer}})],2)],1)],1)},Ut=[],Yt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[e.isDual?a("v-btn",e._g(e._b({staticClass:"rounded-circle",attrs:{color:"blue-grey darken-2"},on:{click:e.toggleDual}},"v-btn",r,!1),n),[a("v-icon",{attrs:{small:""}},[e._v("mdi-compare-remove")])],1):a("v-btn",e._g(e._b({staticClass:"rounded-circle",attrs:{color:"blue-grey darken-2","data-tour-step":"split"},on:{click:e.toggleDual}},"v-btn",r,!1),n),[a("v-icon",{attrs:{small:""}},[e._v("mdi-compare")])],1)]}}])},[a("span",[e._v("Compare layers")])]),a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"rounded-circle hidden-xl-only hidden-lg-only hidden-md-only",attrs:{color:"blue-grey darken-2"}},"v-btn",r,!1),n),[a("v-icon",{attrs:{small:""}},[e._v("mdi-map")])],1)]}}])},[a("span",[e._v("Show layer on map")])]),a("MetadataModal",{attrs:{layer:e.layer}})],1)},Ft=[],Wt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{width:"500"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"rounded-circle",attrs:{color:"blue-grey darken-2"}},"v-btn",r,!1),n),[a("v-icon",{attrs:{small:""}},[e._v("mdi-information")])],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"text-h5 py-9"},[e._v(" "+e._s(e.layer.name)+" ")]),a("v-divider"),a("v-card-text",{staticClass:"py-4"},[e._v(" "+e._s(e.layer.description)+" ")]),a("v-divider")],1)],1)},qt=[],Ht={name:"MetadataModal",data:function(){return{dialog:!1}},props:["layer"]},Jt=Ht,Qt=(0,p.Z)(Jt,Wt,qt,!1,null,null,null),Kt=Qt.exports;f()(Qt,{VBtn:g.Z,VCard:h.Z,VCardText:y.ZB,VCardTitle:y.EB,VDialog:v.Z,VDivider:b.Z,VIcon:_.Z});var Xt={name:"Metadata",components:{MetadataModal:Kt},props:["layer"],computed:(0,l.Z)({},(0,c.rn)({isDual:function(e){return e.mapContainer.isDual},boundaries:function(e){return e.boundary.boundaries},country:function(e){return e.boundary.boundaries}})),methods:{toggleDual:function(){this.$store.dispatch("toggleDual")}}},ea=Xt,ta=(0,p.Z)(ea,Yt,Ft,!1,null,null,null),aa=ta.exports;f()(ta,{VBtn:g.Z,VIcon:_.Z,VTooltip:w.Z});var na={name:"PeriodSelector",components:{Metadata:aa},props:["layer"],computed:(0,l.Z)({},(0,c.rn)({isDual:function(e){return e.mapContainer.isDual},boundary:function(e){return e.boundary.boundaries}})),watch:{layer:{handler:function(e){this.isDual||me(this.$store.map,e)}}},methods:{updateParams:function(e,t){var a=this.layer.params;a["".concat(t)]=e,this.$store.dispatch("setParams",{id:this.layer.id,params:a}),this.$store.dispatch("fetchPieData",{slug:this.layer.slug,geojson:this.boundary,date:a,enable:this.layer.analysisConfig.pieChart}),me(this.$store.map,this.layer,a)}}},ra=na,oa=a(28215),ia=a(24622),sa=(0,p.Z)(ra,Gt,Ut,!1,null,null,null),la=sa.exports;f()(sa,{VCol:ve.Z,VItem:oa.Z,VItemGroup:ia.Z,VRow:Se.Z,VSelect:Ce.Z,VSpacer:S.Z});var ca={name:"LayerControls",components:{PeriodSelector:la},props:["layer"],computed:(0,l.Z)({},(0,c.rn)({boundary:function(e){return e.boundary.boundaries}}))},ua=ca,da=(0,p.Z)(ua,zt,jt,!1,null,"94fe4e0e",null),pa=da.exports,ma=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-chart",{staticClass:"chart px-4 my-5",staticStyle:{height:"350px"},attrs:{theme:e.theme,autoresize:"",option:e.option,loading:e.loading,"loading-options":e.loadingOptions}})],1)},fa=[],ga={props:["layer"],data:function(){return{option:{title:{text:"Ten Day Drought prevalence",left:"left",top:0},toolbox:{show:!0,feature:{saveAsImage:{show:!0},dataZoom:{show:!0,filterMode:"filter"},magicType:{show:!0,type:["line","bar","stack"]},top:0}},tooltip:{trigger:"axis"},dataset:{dimensions:[],source:[]},xAxis:{type:"category"},yAxis:{max:"dataMax",show:!0,nameLocation:"middle",nameGap:20,nameRotate:90,name:"% of whole region"},legend:{data:[],bottom:"bottom"},series:[],color:[]},loadingOptions:{maskColor:"transparent",spinnerRadius:20,text:"",lineWidth:3,color:"#f6ca0a"}}},components:{VChart:dt.ZP},computed:(0,l.Z)((0,l.Z)((0,l.Z)({},(0,c.rn)({theme:function(e){return e.chart.theme},barData:function(e){return e.chart.barData},countries:function(e){return e.boundary.countryNames},subregions:function(e){return e.boundary.subRegionNames},regions:function(e){return e.boundary.regionNames},loading:function(e){return e.chart.barLoading}})),(0,c.Se)({places:"selectedPlaces"})),{},{place:function(){var e=this,t={country:"",region:"",subregion:""};return this.places.subregion&&(t.subregion="".concat(this.subregions.find((function(t){return t.id===e.places.subregion})).name,", ")),this.places.region&&(t.region="".concat(this.regions.find((function(t){return t.id===e.places.region})).name,", ")),this.places.country&&(t.country="".concat(this.countries.find((function(t){return t.id===e.places.country})).name)),t}}),mounted:function(){this.subscribeToStore()},methods:{subscribeToStore:function(){var e=this;this.dataUnsubscribe=this.$store.subscribe((function(t){switch(t.type){case"SET_BAR_DATA":e.fetchData();break}}))},fetchData:function(){var e=[];this.layer.analysisConfig.data.forEach((function(t){e.push({type:"bar",stack:"one",name:t})})),this.option.dataset.source=this.barData,this.option.dataset.dimensions=this.layer.analysisConfig.dimensions,this.place.country||this.place.region||this.place.subregion?this.option.title.subtext="".concat(this.place.subregion)+"".concat(this.place.region)+"".concat(this.place.country):this.option.title.subtext="East Africa",this.option.color=this.layer.analysisConfig.color,this.option.legend.data=this.layer.analysisConfig.data,this.option.series=e}}},ha=ga,ya=(0,p.Z)(ha,ma,fa,!1,null,"26437aa2",null),va=ya.exports,ba=a(68023),_a=a(91416),Sa=a(91758),Ca=a(8690),xa=a(82739),wa=a(76395);(0,ba.D)([_a.N,Sa.N,Ca.N,xa.N,wa.N]);var Ta={name:"LayerTabs",components:{LayerControls:pa,Bar:va,Pie:gt},props:["datasetName"],data:function(){return{tab:null,startYear:null,endYear:null}},computed:(0,l.Z)((0,l.Z)((0,l.Z)({},(0,c.rn)({datasets:function(e){return e.dataset.datasets},countries:function(e){return e.boundary.countryNames},subregions:function(e){return e.boundary.subRegionNames},regions:function(e){return e.boundary.regionNames},dual:function(e){return e.mapContainer.isDual},boundary:function(e){return e.boundary.boundaries}})),(0,c.Se)({places:"selectedPlaces"})),{},{filterDatasets:function(){var e=this;return this.datasets.find((function(t){return t.name===e.datasetName&&!t.isBoundary}))},place:function(){var e=this,t={country:"",region:"",subregion:""};return this.places.country&&(t.country=this.countries.find((function(t){return t.id===e.places.country})).name),this.places.region&&(t.region=", ".concat(this.regions.find((function(t){return t.id===e.places.region})).name)),this.places.subregion&&(t.subregion=", ".concat(this.subregions.find((function(t){return t.id===e.places.subregion})).name)),t}}),methods:{yearLs:function(e){var t=e.paramsSelectorConfig.find((function(e){return"selectedYear"===e.key}));return t.options},disabledYears:function(e){var t=[],a=e.paramsSelectorConfig.find((function(e){return"selectedYear"===e.key})).options;return a&&(a=a.filter((function(t){return t.value>e.analysisConfig.barRange[1]})),a.map((function(e){t.push(e.label)}))),t},toggleLayerVisibility:function(e){this.$store.dispatch("toggleLayerVisibility",{layerId:e})},setBarRange:function(e){this.$store.dispatch("setBarRange",{id:e.id,barRange:[this.$refs.startYear[0].lazyValue,this.$refs.endYear[0].lazyValue]}),this.$store.dispatch("fetchBarData",{slug:e.slug,geojson:this.boundary,enable:e.analysisConfig.barChart,barRange:e.analysisConfig.barRange})}}},ka=Ta,Za=a(56251),Ea=(0,p.Z)(ka,Nt,Pt,!1,null,null,null),Ra=Ea.exports;f()(Ea,{VBtn:g.Z,VCard:h.Z,VCardTitle:y.EB,VCol:ve.Z,VDivider:b.Z,VRow:Se.Z,VSelect:Ce.Z,VSpacer:S.Z,VSwitch:Za.Z});var Aa={name:"AnalysisContainer",components:{LayerTabs:Ra},props:["datasetName"]},Da=Aa,La=(0,p.Z)(Da,Ot,Bt,!1,null,"6f9b366c",null),Ma=La.exports;f()(La,{VCard:h.Z});var Va={name:"DatasetTabs",components:{AnalysisContainer:Ma},data:function(){return{tab:null}},computed:(0,l.Z)({},(0,c.rn)({datasets:function(e){return e.dataset.datasets},loading:function(e){return e.dataset.loading},boundary:function(e){return e.boundary.boundaries}})),watch:{tab:{handler:function(e){var t=this,a=this.datasets.find((function(t){return t.id===e}));a.layers.map((function(e){e.isBoundary||(t.$store.dispatch("fetchPieData",{slug:e.slug,geojson:t.boundary,date:e.params,enable:e.analysisConfig.pieChart}),t.$store.dispatch("fetchBarData",{slug:e.slug,geojson:t.boundary,enable:e.analysisConfig.barChart,barRange:e.analysisConfig.barRange}))}))}},boundary:{handler:function(e){var t=this,a=this.datasets.find((function(e){return e.id===t.tab}));a.layers.map((function(a){a.isBoundary||(t.$store.dispatch("fetchPieData",{slug:a.slug,geojson:e,date:a.params,enable:a.analysisConfig.pieChart}),t.$store.dispatch("fetchBarData",{slug:a.slug,geojson:e,enable:a.analysisConfig.barChart,barRange:a.analysisConfig.barRange}))}))}}},methods:{}},Ia=Va,$a=a(94227),Oa=a(71759),Ba=a(84319),Na=a(95547),Pa=a(21208),za=(0,p.Z)(Ia,It,$t,!1,null,null,null),ja=za.exports;f()(za,{VIcon:_.Z,VTab:$a.Z,VTabItem:Oa.Z,VTabs:Ba.Z,VTabsItems:Na.Z,VTabsSlider:Pa.Z});var Ga={name:"Analysis",components:{DatasetTabs:ja}},Ua=Ga,Ya=(0,p.Z)(Ua,Mt,Vt,!1,null,"5b772d94",null),Fa=Ya.exports,Wa={name:"Desktop",components:{Map:rt,AdminConfig:Lt,Analysis:Fa},computed:(0,l.Z)({},(0,c.rn)({showMap:function(e){return e.ui.showMap},showAnalysis:function(e){return e.ui.showAnalysis}}))},qa=Wa,Ha=(0,p.Z)(qa,q,H,!1,null,"52dc7a70",null),Ja=Ha.exports;f()(Ha,{VCol:ve.Z,VRow:Se.Z});var Qa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",{staticStyle:{height:"100%"},attrs:{"no-gutters":""}},[a("v-col",{directives:[{name:"show",rawName:"v-show",value:1==e.showAnalysis,expression:"showAnalysis == true"}],staticClass:"overflow-auto analysisContainer",staticStyle:{height:"93vh"},attrs:{sm:"12",md:"6",lg:"7",xl:"6"}},[a("v-row",{staticClass:"grey lighten-4",staticStyle:{"min-height":"300px"},attrs:{"no-gutters":""}},[a("v-col",{staticClass:"lighten-5 px-6 py-6",attrs:{cols:"12","data-tour-step":"1"}},[a("AdminConfig")],1)],1),a("v-row",{staticClass:"grey darken-4",attrs:{"no-gutters":""}},[a("v-col",{staticClass:"px-4 py-3",attrs:{cols:"12"}},[a("Analysis",{attrs:{"data-tour-step":"3"}})],1)],1)],1),a("v-col",{directives:[{name:"show",rawName:"v-show",value:1==e.showMap,expression:"showMap == true"}],ref:"mapContainer",staticClass:"mapContainer grey darken-3",staticStyle:{"min-width":"100px","max-width":"100%",height:"auto"}},[a("Map")],1)],1)},Ka=[],Xa={name:"Mobile",components:{Map:rt,AdminConfig:Lt,Analysis:Fa},computed:(0,l.Z)({},(0,c.rn)({showMap:function(e){return e.ui.showMap},showAnalysis:function(e){return e.ui.showAnalysis}}))},en=Xa,tn=(0,p.Z)(en,Qa,Ka,!1,null,null,null),an=tn.exports;f()(tn,{VCol:ve.Z,VRow:Se.Z});var nn={name:"Dashboard",components:{Mobile:an,Desktop:Ja},computed:(0,l.Z)({},(0,c.rn)({isMobile:function(e){return e.ui.isMobile}})),created:function(){window.innerWidth<=768?this.$store.dispatch("toggleMobile",{isMobile:!0}):this.$store.dispatch("toggleMobile",{isMobile:!1})},mounted:function(){var e=this;addEventListener("resize",(function(){window.innerWidth<=768?e.$store.dispatch("toggleMobile",{isMobile:!0}):e.$store.dispatch("toggleMobile",{isMobile:!1})}))}},rn=nn,on=(0,p.Z)(rn,F,W,!1,null,null,null),sn=on.exports;n.Z.use(Y.Z);var ln=[{path:"/",name:"dashboard",component:sn}],cn=new Y.Z({mode:"history",base:"/dash/",routes:ln}),un=cn,dn=a(39132);n.Z.use(dn.Z);var pn=new dn.Z({}),mn=a(29057),fn=a.n(mn),gn=a(16198),hn=(a(35666),a(23123),function(){return{boundaries:{iso:"IGAD",type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[20.6103515625,-12.039320557540572],[51.943359375,-12.039320557540572],[51.943359375,22.755920681486405],[20.6103515625,22.755920681486405],[20.6103515625,-12.039320557540572]]]}}]},countryNames:[{id:"BDI",name:"Burundi"},{id:"DJI",name:"Djibouti"},{id:"ERI",name:"Eritrea"},{id:"ETH",name:"Ethiopia"},{id:"KEN",name:"Kenya"},{id:"RWA",name:"Rwanda"},{id:"SOM",name:"Somalia"},{id:"SSD",name:"South Sudan"},{id:"SDN",name:"Sudan"},{id:"TZA",name:"Tanzania"},{id:"UGA",name:"Uganda"}],regionNames:[],subRegionNames:[],selectedCountry:null,selectedRegion:null,selectedSubRegion:null}}),yn={state:hn(),getters:{getCountry:function(e){return e.selectedCountry},getBoundaries:function(e){return e.boundaries},selectedPlaces:function(e){return{country:e.selectedCountry,region:e.selectedRegion,subregion:e.selectedSubRegion}}},mutations:{SET_BOUNDARY:function(e,t){return e.boundaries=t},SET_REGION_NAMES:function(e,t){return e.regionNames=t},SET_SUBREGION_NAMES:function(e,t){return e.subRegionNames=t},UPDATE_COUNTRY:function(e,t){return e.selectedCountry=t},UPDATE_REGION:function(e,t){return e.selectedRegion=t},UPDATE_SUBREGION:function(e,t){return e.selectedSubRegion=t},RESET_BOUNDARY:function(e){Object.assign(e,hn())}},actions:{fetchBoundaries:function(){var e=(0,gn.Z)(regeneratorRuntime.mark((function e(t,a){var n,r,o,i,s,l,c,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dispatch,r=t.commit,e.prev=1,o="",i=a.country,1===a.level&&i?o=i:2===a.level&&a.region?(s=a.region.split("."),o="".concat(s[0],"/").concat(s[1].split("_")[0])):3===a.level&&a.subregion&&(l=a.subregion.split("."),o="".concat(l[0],"/").concat(l[1],"/").concat(l[2].split("_")[0])),e.next=7,fetch("https://eahazardswatch.icpac.net/api/geostore/admin/".concat(o,"?thresh=0.005"));case 7:return c=e.sent,e.next=10,c.json();case 10:return u=e.sent,e.next=13,n("fetchAdminNames",{country:a.country,level:a.level,region:a.region});case 13:r("SET_BOUNDARY",u.data.attributes.geojson),e.next=19;break;case 16:return e.prev=16,e.t0=e["catch"](1),e.abrupt("return",console.log(e.t0));case 19:case"end":return e.stop()}}),e,null,[[1,16]])})));function t(t,a){return e.apply(this,arguments)}return t}(),fetchAdminNames:function(){var e=(0,gn.Z)(regeneratorRuntime.mark((function e(t,a){var n,r,o,i,s,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.commit,e.prev=1,r="https://eahazardswatch.icpac.net/pg/featureserv/functions",1!==a.level){e.next=13;break}return e.next=6,fetch("".concat(r,"/ea_adm").concat(a.level,"_list/items.json?country_iso=").concat(a.country));case 6:return o=e.sent,e.next=9,o.json();case 9:i=e.sent,n("SET_REGION_NAMES",i),e.next=21;break;case 13:if(2!==a.level){e.next=21;break}return e.next=16,fetch("".concat(r,"/ea_adm").concat(a.level,"_list/items.json?country_iso=").concat(a.country,"&adm1=").concat(a.region));case 16:return s=e.sent,e.next=19,s.json();case 19:l=e.sent,n("SET_SUBREGION_NAMES",l);case 21:e.next=26;break;case 23:return e.prev=23,e.t0=e["catch"](1),e.abrupt("return",console.log(e.t0));case 26:case"end":return e.stop()}}),e,null,[[1,23]])})));function t(t,a){return e.apply(this,arguments)}return t}(),resetBoundary:function(e){var t=e.commit;t("RESET_BOUNDARY")}}},vn=yn,bn={state:function(){return{isDual:!1}},getters:{},mutations:{TOGGLE_DUAL:function(e){return e.isDual=!e.isDual,e.isDual}},actions:{toggleDual:function(){var e=(0,gn.Z)(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t.commit,a("TOGGLE_DUAL");case 2:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}},_n=bn,Sn={state:function(){return{datasets:[],loading:!0}},getters:{},mutations:{SET_DATASETS:function(e,t){return e.datasets=t},SET_LOADING:function(e){return e.loading=!1}},actions:{fetchDatasets:function(){var e=(0,gn.Z)(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://grace-amondi.github.io/dash/db.json");case 3:return a=e.sent,e.next=6,a.json();case 6:n=e.sent,t.commit("SET_DATASETS",n["datasets"]),e.next=13;break;case 10:return e.prev=10,e.t0=e["catch"](0),e.abrupt("return",console.error(e.t0));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));function t(t){return e.apply(this,arguments)}return t}()}},Cn=Sn,xn=a(68932),wn=(a(40561),function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=6378137*Math.PI*2,o=e/360*r,i=Math.sin(t*Math.PI/180),s=.25*Math.log((1+i)/(1-i))/Math.PI*r,c=o-50+","+(s-50)+","+(o+50)+","+(s+50),u=(0,l.Z)((0,l.Z)({SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,WIDTH:256,HEIGHT:256,CRS:"EPSG:3857",STYLES:"",INFO_FORMAT:"application/json"},n),{},{BBOX:c,I:128,J:128}),d=Object.keys(u).map((function(e){return"".concat(e,"=").concat(u[e])})).join("&");return"".concat(a,"?").concat(d)}),Tn=[{id:"ea_boundaries",dataset:"ea_boundaries",name:"Admin Boundaries",layer:"ea_boundaries",isBoundary:!0,layers:[{isBoundary:!0,tableName:"pgadapter.ea_gadm36_political_boundaries",name:"Admin Boundaries",id:"pgadapter.ea_gadm36_political_boundaries",description:"East Africa Boundaries",default:!0,visible:!0,layerConfig:{type:"vector",source:{tiles:["https://eahazardswatch.icpac.net/pg/tileserv/pgadapter.ea_gadm36_political_boundaries/{z}/{x}/{y}.pbf"],type:"vector"},render:{layers:[{id:"level-0-fill",filter:["==","level",0],maxzoom:3.5,paint:{"fill-color":"#ffffff","fill-opacity":0},"source-layer":"pgadapter.ea_gadm36_political_boundaries",source:"pgadapter.ea_gadm36_political_boundaries",type:"fill"},{id:"level-0-line",filter:["==","level",0],paint:{"line-color":"#7f7f7f","line-opacity":.7,"line-width":.7},"source-layer":"pgadapter.ea_gadm36_political_boundaries",source:"pgadapter.ea_gadm36_political_boundaries",type:"line"},{id:"level-1-fill",filter:["==","level",1],minzoom:4,maxzoom:7,paint:{"fill-color":"#ffffff","fill-opacity":0},"source-layer":"pgadapter.ea_gadm36_political_boundaries",source:"pgadapter.ea_gadm36_political_boundaries",type:"fill"},{id:"level-1-line",filter:["==","level",1],minzoom:5,paint:{"line-color":"#7f7f7f","line-opacity":.3,"line-width":.7},"source-layer":"pgadapter.ea_gadm36_political_boundaries",source:"pgadapter.ea_gadm36_political_boundaries",type:"line"},{id:"level-2-fill",filter:["==","level",2],minzoom:7,paint:{"fill-color":"#ffffff","fill-opacity":0},"source-layer":"pgadapter.ea_gadm36_political_boundaries",source:"pgadapter.ea_gadm36_political_boundaries",type:"fill"},{id:"level-2-line",filter:["==","level",2],minzoom:7,paint:{"line-color":"#f1f1f1","line-opacity":.4,"line-dasharray":[2,4],"line-width":.5},"source-layer":"pgadapter.ea_gadm36_political_boundaries",source:"pgadapter.ea_gadm36_political_boundaries",type:"line"}]}},interactionConfig:{output:[{column:"gid_0",format:null,property:"ISO",type:"string"}],type:"intersection"}}]}],kn=(0,xn.Z)(Tn),Zn={state:function(){return{layers:[],layerConfig:{type:"raster",tiles:[],minzoom:2,maxzoom:12,tileSize:256},allLayers:[],infoUrl:"",featureInfo:null}},getters:{getActiveLayers:function(e){return e.layers}},mutations:{RESET_CONFIG:function(e){return Object.assign(e,{layerConfig:{type:"raster",tiles:[],minzoom:2,maxzoom:12,tileSize:256}}),e.layerConfig},SET_CONFIG:function(e,t){var a=e.layers.find((function(e){return e.id===t.id}));return a&&(e.layerConfig.tiles[0]=a.layerConfig.tiles[0],Object.keys(a.params).forEach((function(t){e.layerConfig.tiles[0]=e.layerConfig.tiles[0].replace("{".concat(t,"}"),a.params[t])}))),e.layerConfig},SET_LAYERS:function(e){var t,a=[];return e.dataset.datasets=kn.concat(e.dataset.datasets),e.dataset.datasets.map((function(e){a.push(e.layers)})),e.layers=(t=Array.prototype).concat.apply(t,a),e.layers.map((function(e){if(null===e||void 0===e||!e.isBoundary){var t=e.layerConfig.tiles[0];Object.keys(e.params).forEach((function(a){t=t.replace("{".concat(a,"}"),e.params[a])})),e["parsedConfig"]={type:"raster",tiles:[t],minzoom:2,maxzoom:12,tileSize:256}}})),e.layers},SET_PARAMS:function(e,t){var a=e.layers.findIndex((function(e){return e.id===t.id}));return Object.assign(e.layers[a].params,t.params),e.layers},SET_BAR_RANGE:function(e,t){return e.layers.find((function(e){return e.id===t.id})).analysisConfig.barRange=t.barRange,e.layers},TOGGLE_LAYER_VISIBILITY:function(e,t){var a=e.layers.find((function(e){return e.id===t.layerId})),n=e.layers.findIndex((function(e){return e.id===t.layerId}));if(a)return e.layers.splice(n,1),e.layers.splice(1,0,a),a.visible=!a.visible},SET_FEATURE_INFO_URL:function(e,t){var a=e.layers[0],n=t.lat,r=t.lng,o=a.params,i=(null===a||void 0===a?void 0:a.wmsConfig)||{},s=i.params,l=i.url,c={};return Object.keys(s).forEach((function(e){o[s[e]]?c[e]=o[s[e]]:c[e]=s[e]})),e.infoUrl=wn(r,n,l,c),e.infoUrl},SET_FEATURE_INFO:function(e,t){e.featureInfo=t.featureInfo}},actions:{setLayers:function(){var e=(0,gn.Z)(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.dispatch,n=t.commit,e.next=3,a("fetchDatasets");case 3:return e.next=5,n("SET_LAYERS");case 5:n("SET_LOADING");case 6:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),toggleLayerVisibility:function(){var e=(0,gn.Z)(regeneratorRuntime.mark((function e(t,a){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.commit,n("TOGGLE_LAYER_VISIBILITY",a);case 2:case"end":return e.stop()}}),e)})));function t(t,a){return e.apply(this,arguments)}return t}(),resetConfig:function(){var e=(0,gn.Z)(regeneratorRuntime.mark((function e(t,a){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.commit,n("RESET_CONFIG",a);case 2:case"end":return e.stop()}}),e)})));function t(t,a){return e.apply(this,arguments)}return t}(),setConfig:function(){var e=(0,gn.Z)(regeneratorRuntime.mark((function e(t,a){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dispatch,r=t.commit,e.next=3,n("resetConfig");case 3:r("SET_CONFIG",a);case 4:case"end":return e.stop()}}),e)})));function t(t,a){return e.apply(this,arguments)}return t}(),setParams:function(){var e=(0,gn.Z)(regeneratorRuntime.mark((function e(t,a){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dispatch,r=t.commit,e.next=3,r("SET_PARAMS",a);case 3:n("setConfig",a);case 4:case"end":return e.stop()}}),e)})));function t(t,a){return e.apply(this,arguments)}return t}(),setBarRange:function(){var e=(0,gn.Z)(regeneratorRuntime.mark((function e(t,a){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.commit,n("SET_BAR_RANGE",a);case 2:case"end":return e.stop()}}),e)})));function t(t,a){return e.apply(this,arguments)}return t}(),setFeatureInfoUrl:function(){var e=(0,gn.Z)(regeneratorRuntime.mark((function e(t,a){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.commit,n("SET_FEATURE_INFO_URL",a);case 2:case"end":return e.stop()}}),e)})));function t(t,a){return e.apply(this,arguments)}return t}(),setFeatureInfo:function(){var e=(0,gn.Z)(regeneratorRuntime.mark((function e(t,a){var n,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,e.prev=1,e.next=4,fetch(a.infoUrl);case 4:return r=e.sent,e.next=7,r.json();case 7:o=e.sent,n("SET_FEATURE_INFO",{featureInfo:o.features&&!!o.features.length&&o.features[0]}),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));function t(t,a){return e.apply(this,arguments)}return t}()},modules:{dataset:Cn}},En=Zn,Rn=(a(38862),{state:function(){return{theme:{color:["#fc97af","#87f7cf","#f7f494","#72ccff","#f7c5a0","#d4a4eb","#d2f5a6","#76f2f2"],backgroundColor:"#1e1e1e",textStyle:{width:"5"},title:{textStyle:{color:"#f5f5f5"},subtextStyle:{color:"#dddddd"}},line:{itemStyle:{borderWidth:"4"},lineStyle:{width:"3"},symbolSize:"0",symbol:"roundRect",smooth:!0},radar:{itemStyle:{borderWidth:"4"},lineStyle:{width:"3"},symbolSize:"0",symbol:"roundRect",smooth:!0},bar:{itemStyle:{barBorderWidth:0,barBorderColor:"#ccc"}},pie:{itemStyle:{borderWidth:0,borderColor:"#ccc"}},scatter:{itemStyle:{borderWidth:0,borderColor:"#ccc"}},boxplot:{itemStyle:{borderWidth:0,borderColor:"#ccc"}},parallel:{itemStyle:{borderWidth:0,borderColor:"#ccc"}},sankey:{itemStyle:{borderWidth:0,borderColor:"#ccc"}},funnel:{itemStyle:{borderWidth:0,borderColor:"#ccc"}},gauge:{itemStyle:{borderWidth:0,borderColor:"#ccc"}},candlestick:{itemStyle:{color:"#fc97af",color0:"transparent",borderColor:"#fc97af",borderColor0:"#87f7cf",borderWidth:"2"}},graph:{itemStyle:{borderWidth:0,borderColor:"#ccc"},lineStyle:{width:"1",color:"#ffffff"},symbolSize:"0",symbol:"roundRect",smooth:!0,color:["#fc97af","#87f7cf","#f7f494","#72ccff","#f7c5a0","#d4a4eb","#d2f5a6","#76f2f2"],label:{color:"#293441"}},map:{itemStyle:{areaColor:"#f3f3f3",borderColor:"#999999",borderWidth:.5},label:{color:"#893448"},emphasis:{itemStyle:{areaColor:"rgba(255,178,72,1)",borderColor:"#eb8146",borderWidth:1},label:{color:"rgb(137,52,72)"}}},geo:{itemStyle:{areaColor:"#f3f3f3",borderColor:"#999999",borderWidth:.5},label:{color:"#893448"},emphasis:{itemStyle:{areaColor:"rgba(255,178,72,1)",borderColor:"#eb8146",borderWidth:1},label:{color:"rgb(137,52,72)"}}},categoryAxis:{axisLine:{show:!0,lineStyle:{color:"#919191"}},axisTick:{show:!0,lineStyle:{color:"#d8d8d8"}},axisLabel:{show:!0,color:"#c9c9c9"},splitLine:{show:!1,lineStyle:{color:["#e6e6e6"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.05)","rgba(200,200,200,0.02)"]}}},valueAxis:{axisLine:{show:!0,lineStyle:{color:"#919191"}},axisTick:{show:!0,lineStyle:{color:"#d8d8d8"}},axisLabel:{show:!0,color:"#c9c9c9"},splitLine:{show:!1,lineStyle:{color:["#e6e6e6"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.05)","rgba(200,200,200,0.02)"]}}},logAxis:{axisLine:{show:!0,lineStyle:{color:"#919191"}},axisTick:{show:!0,lineStyle:{color:"#d8d8d8"}},axisLabel:{show:!0,color:"#c9c9c9"},splitLine:{show:!1,lineStyle:{color:["#e6e6e6"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.05)","rgba(200,200,200,0.02)"]}}},timeAxis:{axisLine:{show:!0,lineStyle:{color:"#919191"}},axisTick:{show:!0,lineStyle:{color:"#d8d8d8"}},axisLabel:{show:!0,color:"#c9c9c9"},splitLine:{show:!1,lineStyle:{color:["#e6e6e6"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.05)","rgba(200,200,200,0.02)"]}}},toolbox:{iconStyle:{borderColor:"#999999"},emphasis:{iconStyle:{borderColor:"#666666"}}},legend:{textStyle:{color:"#bbbbbb"}},tooltip:{axisPointer:{lineStyle:{color:"#f1f1f1",width:1},crossStyle:{color:"#f1f1f1",width:1}}},timeline:{lineStyle:{color:"#87f7cf",width:1},itemStyle:{color:"#87f7cf",borderWidth:1},controlStyle:{color:"#87f7cf",borderColor:"#87f7cf",borderWidth:.5},checkpointStyle:{color:"#fc97af",borderColor:"#fc97af"},label:{color:"#87f7cf"},emphasis:{itemStyle:{color:"#f7f494"},controlStyle:{color:"#87f7cf",borderColor:"#87f7cf",borderWidth:.5},label:{color:"#87f7cf"}}},visualMap:{color:["#fc97af","#87f7cf"]},dataZoom:{backgroundColor:"rgba(255,255,255,0)",dataBackgroundColor:"rgba(114,204,255,1)",fillerColor:"rgba(114,204,255,0.2)",handleColor:"#72ccff",handleSize:"100%",textStyle:{color:"#333333"}},markPoint:{label:{color:"#293441"},emphasis:{label:{color:"#293441"}}}},barData:[],pieData:[],barLoading:!0,pieLoading:!0}},getter:{},mutations:{SET_BAR_DATA:function(e,t){return e.barData=t},SET_PIE_DATA:function(e,t){return e.pieData=t},SET_BAR_LOADING:function(e,t){return e.barLoading=t,e.barLoading},SET_PIE_LOADING:function(e,t){return e.pieLoading=t,e.pieLoading}},actions:{fetchBarData:function(){var e=(0,gn.Z)(regeneratorRuntime.mark((function e(t,a){var n,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.commit,n("SET_BAR_LOADING",!0),e.prev=2,!a.enable){e.next=13;break}return e.next=6,fetch("https://eahazardswatch.icpac.net/pg-gridapi/api/analysis/".concat(a.slug,"?start_year=").concat(a.barRange[0],"&end_year=").concat(a.barRange[1],"&ts=true"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({geojson:a.geojson})});case 6:return r=e.sent,e.next=9,r.json();case 9:return o=e.sent,e.next=12,n("SET_BAR_DATA",o);case 12:n("SET_BAR_LOADING",!1);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](2),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[2,15]])})));function t(t,a){return e.apply(this,arguments)}return t}(),fetchPieData:function(){var e=(0,gn.Z)(regeneratorRuntime.mark((function e(t,a){var n,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.commit,n("SET_PIE_LOADING",!0),e.prev=2,!a.enable){e.next=13;break}return e.next=6,fetch("https://eahazardswatch.icpac.net/pg-gridapi/api/analysis/".concat(a.slug,"?year=").concat(a.date.selectedYear,"&month=").concat(a.date.selectedMonth,"&tenday=").concat(a.date.selectedTenDays),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({geojson:a.geojson})});case 6:return r=e.sent,e.next=9,r.json();case 9:return o=e.sent,e.next=12,n("SET_PIE_DATA",o);case 12:n("SET_PIE_LOADING",!1);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](2),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[2,15]])})));function t(t,a){return e.apply(this,arguments)}return t}()}}),An=Rn,Dn={state:function(){return{isMobile:!1,showMap:!1,showAnalysis:!0}},getters:{},mutations:{TOGGLE_MOBILE:function(e,t){return e.isMobile=t.isMobile,e.isMobile},TOGGLE_MAP_ANALYSIS:function(e){e.showMap=!e.showMap,e.showAnalysis=!e.showAnalysis}},actions:{toggleMobile:function(){var e=(0,gn.Z)(regeneratorRuntime.mark((function e(t,a){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.commit,n("TOGGLE_MOBILE",a);case 2:case"end":return e.stop()}}),e)})));function t(t,a){return e.apply(this,arguments)}return t}(),toggleMapAnalysis:function(){var e=(0,gn.Z)(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t.commit,a("TOGGLE_MAP_ANALYSIS");case 2:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}},Ln=Dn;n.Z.use(c.ZP);var Mn=new c.ZP.Store({modules:{boundary:vn,mapContainer:_n,dataset:Cn,layer:En,chart:An,ui:Ln}});a(8942);n.Z.config.productionTip=!1,n.Z.config.devtools=!0,n.Z.use(fn()),new n.Z({router:un,vuetify:pn,store:Mn,render:function(e){return e(U)}}).$mount("#app")}},t={};function a(n){var r=t[n];if(void 0!==r)return r.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,a),o.exports}a.m=e,function(){var e=[];a.O=function(t,n,r,o){if(!n){var i=1/0;for(u=0;u<e.length;u++){n=e[u][0],r=e[u][1],o=e[u][2];for(var s=!0,l=0;l<n.length;l++)(!1&o||i>=o)&&Object.keys(a.O).every((function(e){return a.O[e](n[l])}))?n.splice(l--,1):(s=!1,o<i&&(i=o));if(s){e.splice(u--,1);var c=r();void 0!==c&&(t=c)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[n,r,o]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};a.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"===typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"===typeof n.then)return n}var o=Object.create(null);a.r(o);var i={};e=e||[null,t({}),t([]),t(t)];for(var s=2&r&&n;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){i[e]=function(){return n[e]}}));return i["default"]=function(){return n},a.d(o,i),o}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var r,o,i=n[0],s=n[1],l=n[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(r in s)a.o(s,r)&&(a.m[r]=s[r]);if(l)var u=l(a)}for(t&&t(n);c<i.length;c++)o=i[c],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(u)},n=self["webpackChunkdash"]=self["webpackChunkdash"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(3969)}));n=a.O(n)})();
//# sourceMappingURL=app-legacy.181f3a51.js.map